const config={wrapperSelector:".wrapper",animationPath:"https://storage.yandexcloud.net/external-assets/tantum/animations/lottie/jump.json",animationSize:{desktop:{width:456,height:344},mobile:{width:292,height:208}},snowTrails:{enabled:!0,lottiePath:"https://storage.yandexcloud.net/external-assets/tantum/animations/lottie/snow.json",size:{desktop:{width:456,height:344},mobile:{width:292,height:208}},opacity:1,zIndex:"1001",showOnMovement:!0,fadeInDuration:500,fadeOutDuration:1e3,trailDelay:300,reflectWithMain:!0},movement:{enabled:!0,speeds:{desktop:{horizontal:230,vertical:70},mobile:{horizontal:180,vertical:60}},moveInViewport:!0,startDelay:1e3,startPosition:{x:"left",y:"top"},bounceAtEdges:!0,edgeMargin:0,edgeOverflow:70,flipAnimation:!0,flipDuration:300,pauseOnHover:!0,oneTime:!1,restartOnBottom:!0,restartDelay:1e4,bottomThreshold:10},delays:{containerAppearance:500,animationStart:500,movementStart:2e3},animationStyles:{pointerEvents:"none",zIndex:"1001",transformOrigin:"center center",willChange:"transform"}};function getDeviceType(){const t=window.matchMedia("(max-width: 768px)").matches,e=window.matchMedia("(min-width: 769px) and (max-width: 1024px)").matches;return t?"mobile":e?"tablet":"desktop"}function getAnimationSize(){const t=getDeviceType();return config.animationSize[t]||config.animationSize.desktop}function getSnowTrailsSize(){const t=getDeviceType();return config.snowTrails.size[t]||config.snowTrails.size.desktop}function getMovementSpeeds(){const t=getDeviceType(),e=config.movement.speeds[t]||config.movement.speeds.desktop;return{horizontalSpeed:e.horizontal,verticalSpeed:e.vertical}}document.addEventListener("DOMContentLoaded",(function(){const t=document.querySelector(config.wrapperSelector);if(!t)return;"static"===window.getComputedStyle(t).position&&(t.style.position="relative");const e=getAnimationSize(),n=getSnowTrailsSize(),i=getMovementSpeeds(),o=function(t){const e=document.createElement("div");return e.className="lottie-mascot-main",Object.assign(e.style,{position:"fixed",width:`${t.width}px`,height:`${t.height}px`,opacity:"0",transition:"opacity 0.5s ease-in",pointerEvents:"none",...config.animationStyles}),e}(e),a=function(t){if(!config.snowTrails.enabled)return null;const e=document.createElement("div");return e.className="snow-trails-container",Object.assign(e.style,{position:"fixed",width:`${t.width}px`,height:`${t.height}px`,opacity:"0",pointerEvents:"none",zIndex:config.snowTrails.zIndex,transformOrigin:"center center",transition:`opacity ${config.snowTrails.fadeInDuration}ms ease-in`,display:"block"}),e}(n);function s(t){t&&(t.style.position="fixed",t.style.left="0px",t.style.top="70px")}function r(t,e,n=!1){if(!t)return null;if("undefined"==typeof lottie){const i=document.createElement("script");return i.src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js",i.onload=()=>l(t,e,n),document.head.appendChild(i),null}return l(t,e,n)}function l(t,e,n=!1){const i=lottie.loadAnimation({container:t,renderer:"svg",loop:n,autoplay:!0,path:e});return i.addEventListener("DOMLoaded",(()=>{n||(t.style.opacity="1")})),i}setTimeout((()=>{t.appendChild(a),t.appendChild(o),config.movement.moveInViewport&&(s(o),s(a)),setTimeout((()=>{const t=r(o,config.animationPath),n=r(a,config.snowTrails.lottiePath,!0);if(config.movement.enabled){const s=config.delays?.movementStart||config.movement.startDelay;setTimeout((()=>{!function(t,e,n,i,o,a,s){let r=null,l=null,c=!1,m=!1,d=null,p="right",u="down",f=0,g=!1,h=!1,w=null,y=null,v=null,x=null,T=null,S=!0,$=!1,z=!1,D=!1,b=0,O=0,A=1,M=0;const E=300;let I=s.horizontalSpeed,P=s.verticalSpeed,j=window.innerWidth;function k(){const t=window.innerHeight,e=o.height;return O+e>=t-(config.movement.bottomThreshold||10)}function L(){y={x:b,y:O},v=p,x=A,T=config.delays?.movementStart||config.movement.startDelay}function C(){y&&(b=y.x,O=y.y,p=v,A=x,t.style.transform=`translate(${b}px, ${O}px) scaleX(${A})`)}function F(){h||g||(h=!0,S=!1,r&&cancelAnimationFrame(r),e&&$&&q(),t.style.transition="opacity 1s ease-out",t.style.opacity="0",n&&n.pause(),i&&i.pause(),w=setTimeout((()=>{D=!1,z=!1,$=!1,l=null,m=!1,C(),u="down",t.style.transition="opacity 0.8s ease-in",t.style.opacity="1",n&&n.goToAndPlay(0),i&&i.goToAndPlay(0),setTimeout((()=>{h=!1,r=requestAnimationFrame(G)}),T)}),config.movement.restartDelay))}function X(){e&&!z&&config.snowTrails.showOnMovement&&(z=!0,e.style.transform=`translate(${b}px, ${O}px) scaleX(${A})`,setTimeout((()=>{!e||g||h||(e.style.transition=`opacity ${config.snowTrails.fadeInDuration}ms ease-in`,e.style.opacity=config.snowTrails.opacity,$=!0)}),config.snowTrails.trailDelay))}function q(){e&&$&&($=!1,e.style.transition=`opacity ${config.snowTrails.fadeOutDuration}ms ease-out`,e.style.opacity="0",setTimeout((()=>{!e||g||$||h||(z=!1)}),config.snowTrails.fadeOutDuration+100))}function W(){const e=window.innerWidth,n=o.width;"left"===config.movement.startPosition.x?(b=0,p="right",A=1):"right"===config.movement.startPosition.x?(b=e-n,p="left",A=-1):b=0,O=20,u="down",t.style.transform=`translate(${b}px, ${O}px) scaleX(${A})`,L()}function H(t,e,n){if(!config.movement.bounceAtEdges)return!1;const i=config.movement.edgeOverflow;return"left"===p&&t<=-i||"right"===p&&t>=e-n+i}function B(t,e,n){return!!config.movement.bounceAtEdges&&("down"===u&&t>=e-n?!config.movement.restartOnBottom:"up"===u&&t<=0)}function N(e){if(!d)return!1;f=Math.min((e-d)/config.movement.flipDuration,1);const n="right"===p?1:-1,i=f<.5?2*f*f:1-Math.pow(-2*f+2,2)/2;return A+=(n-A)*i,t.style.transform=`translate(${b}px, ${O}px) scaleX(${A})`,!(f>=1)||(m=!1,d=null,A=n,!1)}function V(n){if(!l)return void(l=n);const i=(n-l)/1e3;if(l=n,b+=("right"===p?I:-I)*i,O+=("down"===u?P:-P)*i,D||(D=!0,X()),config.movement.restartOnBottom&&k()&&!h)return void F();const a=window.innerWidth,s=window.innerHeight,r=o.width,c=o.height,f=config.movement.edgeOverflow;H(b,a,r)&&!m&&n-M>E&&(m=!0,d=n,M=n,p="right"===p?"left":"right"),B(O,s,c)&&(u="down"===u?"up":"down"),b=Math.max(-f,Math.min(b,a-r+f)),O=Math.max(0,Math.min(O,s-c)),t.style.transform=`translate(${b}px, ${O}px) scaleX(${A})`,e&&$&&(e.style.transform=`translate(${b}px, ${O}px) scaleX(${A})`)}function G(t){c||g||h||(m&&N(t),V(t)),g||h||(r=requestAnimationFrame(G))}W(),S&&(r=requestAnimationFrame(G));config.movement.pauseOnHover&&(t.addEventListener("mouseenter",(()=>{c=!0,q()})),t.addEventListener("mouseleave",(()=>{c=!1,X()})));window.addEventListener("resize",(()=>{if(g)return;const n=window.innerWidth;if(n===j)return;j=n,w&&clearTimeout(w);const i=getAnimationSize(),o=getMovementSpeeds();t.style.width=`${i.width}px`,t.style.height=`${i.height}px`,e&&(e.style.width=`${i.width}px`,e.style.height=`${i.height}px`),I=o.horizontalSpeed,P=o.verticalSpeed,h=!1,r&&cancelAnimationFrame(r),l=null,r=requestAnimationFrame(G)}))}(o,a,t,n,e,0,i)}),s)}}),config.delays.animationStart)}),config.delays.containerAppearance)}));